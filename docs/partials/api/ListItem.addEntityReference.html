<h1><code ng:non-bindable="">addEntityReference</code>
<div><span class="hint">service in module <code ng:non-bindable="">ListItem</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="listitem-addentityreference-page"><p>Allows us to pass in another entity to associate superficially, only persists for the current session and
no data is saved but it allows us to iterate over all of the references much faster than doing a lookup each
on each digest.  Creates a item._apCache property on the list item object.  It then creates an object for each
type of list item passed in using the list name in the list item model.</p>
</div></div>
<h2 id="usage">Usage</h2>
<div class="usage"><pre class="prettyprint linenums">addEntityReference(entity);</pre>
<h4 id="usage_parameters">Parameters</h4><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>entity</td><td><a href="" class="label type-hint type-hint-object">object</a></td><td><div class="listitem-addentityreference-page"><p>List item to associate.</p>
</div></td></tr></tbody></table><h4 id="usage_returns">Returns</h4><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-object">Object</a></td><td><div class="listitem-addentityreference-page"><p>The cache for the list of the item passed in.</p>
</div></td></tr></table></div>
<h2 id="example">Example</h2>
<div class="example"><div class="listitem-addentityreference-page"><pre class="prettyprint linenums">
// Function to save references between a fictitious project
// and corresponding associated tasks
function associateProjectTasks(project) {
   //Assuming project.tasks is a multi-lookup
   _.each(project.tasks, function(taskLookup) {
       var task = tasksModel.searchLocalCache(taskLookup.lookupId);
       if(task) {
           task.addEntityReference(project);
           project.addEntityReference(task);
       }
   });
}
</pre>
<pre class="prettyprint linenums">
//Structure of cache
listItem._apCache = {
   Projects: {
       14: {id: 14, title: 'Some Project'},
       15: {id: 15, title: 'Another Project'}
   },
   Tasks: {
       300: {id: 300, title: 'Task 300'},
       412: {id: 412, title: 'Some Important Tasks'}
   }
}
</pre>
</div></div>
</div>
